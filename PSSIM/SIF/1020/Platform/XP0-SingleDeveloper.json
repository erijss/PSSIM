{
    "Parameters": {
        "XConnectCertificateName": {
            "Type": "String",
            "Description": "The name of the certificate to be created for the xconnect server.",
            "DefaultValue": ""
        },
        "IdentityServerCertificateName": {
            "Type": "String",
            "Description": "The name of the certificate to be created for the identity server.",
            "DefaultValue": ""
        },
        "IdentityServerAppName": {
            "Type": "String",
            "Description": "The name of the identity server to be created.",
            "DefaultValue": ""
        },
        "AppsLicenseFile": {
            "Type": "String",
            "Description": "The path to the Sitecore license file.",
            "DefaultValue": ".\\License.xml"
        },
        "AppsPrefix": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The prefix for uniquely identifying instances."
        },
        "SitecoreAdminPassword": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "The admin password for the Sitecore instance."
        },
        "AppsRootFolder": {
            "Type": "String",
            "Description": "Root folder to install the site to. If left on the default [systemdrive]:\\inetpub\\wwwroot will be used.",
            "DefaultValue": ""
        },
        "SqlServerAdminUser": {
            "Type": "string",
            "DefaultValue": "sa",
            "Description": "The Sql admin user account to use when installing databases."
        },
        "SqlServerAdminPassword": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "The Sql admin password to use when installing databases."
        },
        "SqlServerInstance": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The Sql Server where databases will be installed."
        },
        "DatabaseCollectionPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql admin password to use when installing databases."
        },
        "DatabaseProcessingPoolsPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Pools connection string in Sitecore."
        },
        "DatabaseReferenceDataPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Reference Data connection string in Sitecore."
        },
        "DatabaseMarketingAutomationPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Marketing Automation connection string in Sitecore."
        },
        "DatabaseMessagingPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Messaging connection string in Sitecore."
        },
        "DatabaseProcessingEnginePassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Engine Tasks and Storage database connection strings in Sitecore."
        },
        "DatabaseReportingPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Reporting connection string in Sitecore."
        },
        "DatabaseCorePassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Core connection string in Sitecore."
        },
        "DatabaseSecurityPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Security connection string in Sitecore."
        },
        "DatabaseMasterPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Master connection string in Sitecore."
        },
        "DatabaseWebPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Web connection string in Sitecore."
        },
        "DatabaseProcessingTasksPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Tasks connection string in Sitecore."
        },
        "DatabaseFormsPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Experience Forms connection string in Sitecore."
        },
        "DatabaseExmMasterPassword": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the EXM Master connection string in Sitecore."
        },
        "SolrUrl": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The Solr instance to use."
        },
        "SolrFolder": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The file path to the Solr instance."
        },
        "SolrService": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The name of the Solr service."
        },
        "XConnectPackage": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the XConnect package to deploy."
        },
        "XConnectAppName": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The name of the XConnect site."
        },
        "SitecoreAppName": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The name of the Sitecore site."
        },
        "IdentityServerPasswordRecoveryUrl": {
            "Type": "string",
            "Description": "Password recovery Url (Host name of CM instance).",
            "DefaultValue": ""
        },
        "SitecorePackage": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the Sitecore package to deploy."
        },
        "IdentityServerAppPackage": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the Identity Server package to deploy."
        },
        "XConnectCollectionEndpoint": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "The url for the XConnect Collection Service."
        },
        "IdentityServerClientsConfiguration": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "Sitecore IdentityServer clients configuration"
        },
        "IdentityServerAllowedCorsOrigins": {
            "Type": "string",
            "Description": "Pipe-separated list of instances (URIs) that are allowed to login via Sitecore Identity.",
            "DefaultValue": ""
        },
        "SitecoreIdentityAuthority": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "IdentityServer provider URI."
        },
        "IdentityServerClientSecret": {
            "Type": "string",
            "Description": "Client secret of PasswordClient section. It's a random string between 1 and 100 symbols long.",
            "DefaultValue": "SIF-Default"
        },
        "PackagesTempLocation": {
            "Type": "String",
            "Description": "Alternative location to save WDP packages. If left on the default $Env:Temp will be used.",
            "DefaultValue": ""
        },
        "PackagesDownloadLocations": {
            "Type": "String",
            "Description": "File with URI and SHA256 hashes of dynamically downloadable WDPs.",
            "DefaultValue": ".\\downloads.json"
        },
        "Update": {
            "Type": "bool",
            "Description": "The parameter for the installing delta WDP packages.",
            "DefaultValue": false
        },
        "SqlServerDeployToElasticPoolName": {
            "Type": "String",
            "Description": "The elastic pool name for deploy databases from the SQL Azure.",
            "DefaultValue": ""
        },
        "XConnectApp:Package": {
            "Type": "String",
            "Reference": "XConnectPackage",
            "Description": "Override to pass XConnectPackage value to XConnectApp config."
        },
        "SitecoreApp:Package": {
            "Type": "String",
            "Reference": "SitecorePackage",
            "Description": "Override to pass SitecorePackage value to SitecoreApp config."
        },
        "IdentityServerApp:Package": {
            "Type": "String",
            "Reference": "IdentityServerAppPackage",
            "Description": "Override to pass IdentityServerAppPackage value to IdentityServer config."
        },
        "XConnectApp:Sitename": {
            "Type": "String",
            "Reference": "XConnectAppName",
            "Description": "Override to pass XConnectSiteName value to XConnectApp config."
        },
        "SitecoreApp:Sitename": {
            "Type": "String",
            "Reference": "SitecoreAppName",
            "Description": "Override to pass SitecoreSiteName value to SitecoreApp config."
        },
        "IdentityServerApp:SiteRoot": {
            "Type": "String",
            "Reference": "AppsRootFolder",
            "Description": "Override to pass SiteRoot value to IdentityServer config."
        },
        "XConnectApp:SiteRoot": {
            "Type": "String",
            "Reference": "AppsRootFolder",
            "Description": "Override to pass SiteRoot value to XConnectApp config."
        },
        "SitecoreApp:SiteRoot": {
            "Type": "String",
            "Reference": "AppsRootFolder",
            "Description": "Override to pass SiteRoot value to SitecoreApp config."
        },
        "IdentityServerApp:IdentityServerPasswordRecoveryUrl": {
            "Type": "String",
            "Reference": "IdentityServerPasswordRecoveryUrl",
            "Description": "Override to pass PasswordRecoveryUrl value to IdentityServer config."
        },
        "SitecoreApp:SitecoreIdentityAuthority": {
            "Type": "String",
            "Reference": "SitecoreIdentityAuthority",
            "Description": "Override to pass SitecoreIdentityAuthority value to SitecoreApp config."
        },
        "SitecoreApp:EndpointXConnectCollection": {
            "Type": "String",
            "Reference": "XConnectCollectionEndpoint",
            "Description": "Override to pass XConnectCollectionService value to SitecoreApp config."
        },
        "IdentityServerApp:ClientsConfiguration": {
            "Type": "String",
            "Reference": "IdentityServerClientsConfiguration",
            "Description": "Override to pass ClientsConfiguration value to IdentityServer config."
        },
        "XConnectApp:SqlServer": {
            "Type": "String",
            "Reference": "SqlServerInstance",
            "Description": "Override to pass SqlServer value to XConnectApp config."
        },
        "SitecoreApp:SqlServer": {
            "Type": "String",
            "Reference": "SqlServerInstance",
            "Description": "Override to pass SqlServer value to SitecoreApp config."
        },
        "IdentityServerApp:SqlServer": {
            "Type": "String",
            "Reference": "SqlServerInstance",
            "Description": "Override to pass SqlServer value to IdentityServer config."
        },
        "XConnectSolr:SolrUrl": {
            "Type": "String",
            "Reference": "SolrUrl",
            "Description": "Override to pass SolrURL value to XConnectSolr config."
        },
        "XConnectApp:SolrUrl": {
            "Type": "String",
            "Reference": "SolrUrl",
            "Description": "Override to pass SolrURL value to XConnectApp config."
        },
        "SitecoreSolr:SolrUrl": {
            "Type": "String",
            "Reference": "SolrUrl",
            "Description": "Override to pass SolrURL value to SitecoreSolr config."
        },
        "SitecoreApp:SolrUrl": {
            "Type": "String",
            "Reference": "SolrUrl",
            "Description": "Override to pass SolrURL value to SitecoreApp config."
        },
        "XConnectSolr:SolrFolder": {
            "Type": "String",
            "Reference": "SolrFolder",
            "Description": "Override to pass SolrRoot value to XConnectSolr config."
        },
        "SitecoreSolr:SolrFolder": {
            "Type": "String",
            "Reference": "SolrFolder",
            "Description": "Override to pass SolrRoot value to SitecoreSolr config."
        },
        "XConnectSolrEndpointSolr": {
            "Type": "String",
            "Reference": "SolrService",
            "Description": "Override to pass SolrService value to XConnectSolr config."
        },
        "SitecoreSolrEndpointSolr": {
            "Type": "String",
            "Reference": "SolrService",
            "Description": "Override to pass SolrService value to SitecoreSolr config."
        },
        "XConnectSolr:SolrCorePrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to XConnectSolr config."
        },
        "XConnectApp:SqlDbPrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to XConnectApp config."
        },
        "XConnectApp:SolrCorePrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to XConnectApp config."
        },
        "SitecoreSolr:SolrCorePrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to SitecoreSolr config."
        },
        "SitecoreApp:SqlDbPrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to SitecoreApp config."
        },
        "IdentityServerApp:SqlDbPrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to IdentityServer config."
        },
        "SitecoreApp:SolrCorePrefix": {
            "Type": "String",
            "Reference": "AppsPrefix",
            "Description": "Override to pass Prefix value to SitecoreApp config."
        },
        "XConnectCertificate:CertificateName": {
            "Type": "String",
            "Reference": "XConnectCertificateName",
            "Description": "Override to pass XConnectCertificateName value to XConnectCertificate config."
        },
        "XConnectCertificate:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to Certificates config."
        },
        "IdentityServerCertificate:CertificateName": {
            "Type": "String",
            "Reference": "IdentityServerAppName",
            "Description": "Override to pass IdentityServerCertificateName value to IdentityServerCertificate config."
        },
        "IdentityServerCertificate:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to Certificates config."
        },
        "IdentityServerApp:SiteName": {
            "Type": "String",
            "Reference": "IdentityServerAppName",
            "Description": "Override to pass IdentityServerAppName value to IdentityServer config."
        },
        "IdentityServerApp:SitecoreIdentityCert": {
            "Type": "String",
            "Reference": "IdentityServerAppName",
            "Description": "Override to pass IdentityServerCertificateName value to IdentityServer config."
        },
        "XConnectApp:AppCertificate": {
            "Type": "String",
            "Reference": "XConnectCertificateName",
            "Description": "Override to pass CertificateName value to XConnectApp config."
        },
        "SitecoreApp:XConnectCertificate": {
            "Type": "String",
            "Reference": "XConnectCertificateName",
            "Description": "Override to pass CertificateName value to SitecoreApp config."
        },
        "XConnectApp:AppsLicenseFile": {
            "Type": "String",
            "Reference": "AppsLicenseFile",
            "Description": "Override to pass LicenseFile value to XConnectApp config."
        },
        "SitecoreApp:AppsLicenseFile": {
            "Type": "String",
            "Reference": "AppsLicenseFile",
            "Description": "Override to pass LicenseFile value to SitecoreApp config."
        },
        "IdentityServerApp:AppsLicenseFile": {
            "Type": "String",
            "Reference": "AppsLicenseFile",
            "Description": "Override to pass LicenseFile value to IdentityServer config."
        },
        "XConnectApp:SqlServerAdminUser": {
            "Type": "String",
            "Reference": "SqlServerAdminUser",
            "Description": "Override to pass SqlServerAdminUser value to XConnectApp config."
        },
        "SitecoreApp:SqlServerAdminUser": {
            "Type": "String",
            "Reference": "SqlServerAdminUser",
            "Description": "Override to pass SqlServerAdminUser value to SitecoreApp config."
        },
        "XConnectApp:SqlServerAdminPassword": {
            "Type": "String",
            "Reference": "SqlServerAdminPassword",
            "Description": "Override to pass SqlServerAdminPassword value to XConnectApp config."
        },
        "SitecoreApp:SqlServerAdminPassword": {
            "Type": "String",
            "Reference": "SqlServerAdminPassword",
            "Description": "Override to pass SqlServerAdminPassword value to SitecoreApp config."
        },
        "IdentityServerApp:IdentityServerAllowedCorsOrigins": {
            "Type": "String",
            "Reference": "IdentityServerAllowedCorsOrigins",
            "Description": "Override to pass AllowedCorsOrigins value to IdentityServer config."
        },
        "SitecoreApp:SitecoreAdminPassword": {
            "Type": "String",
            "Reference": "SitecoreAdminPassword",
            "Description": "Override to pass SitecoreAdminPassword value to SitecoreXPO config."
        },
        "IdentityServerApp:PackagesTempLocation": {
            "Type": "String",
            "Reference": "PackagesTempLocation",
            "Description": "Override to pass PackagesTempLocation value to IdentityServer config."
        },
        "SitecoreApp:PackagesTempLocation": {
            "Type": "String",
            "Reference": "PackagesTempLocation",
            "Description": "Override to pass PackagesTempLocation name value to SitecoreApp config."
        },
        "XConnectApp:PackagesTempLocation": {
            "Type": "String",
            "Reference": "PackagesTempLocation",
            "Description": "Override to pass PackagesTempLocation name value to XConnectApp config."
        },
        "IdentityServerApp:DownloadLocations": {
            "Type": "String",
            "Reference": "PackagesDownloadLocations",
            "Description": "Override to pass DownloadLocations value to IdentityServer config."
        },
        "SitecoreApp:DownloadLocations": {
            "Type": "String",
            "Reference": "PackagesDownloadLocations",
            "Description": "Override to pass DownloadLocations name value to SitecoreApp config."
        },
        "XConnectApp:DownloadLocations": {
            "Type": "String",
            "Reference": "PackagesDownloadLocations",
            "Description": "Override to pass DownloadLocations name value to XConnectApp config."
        },
        "SitecoreApp:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to SitecoreApp config."
        },
        "XConnectApp:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to XConnectApp config."
        },
        "IdentityServerApp:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to IdentityServer config."
        },
        "XConnectSolr:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to XConnectSolr config."
        },
        "SitecoreSolr:Update": {
            "Type": "bool",
            "Reference": "Update",
            "Description": "Override to pass Update value to SitecoreSolr config."
        },
        "SitecoreApp:SqlServerDeployToElasticPoolName": {
            "Type": "String",
            "Reference": "SqlServerDeployToElasticPoolName",
            "Description": "Override to pass DeployToElasticPoolName value to SitecoreApp config."
        },
        "XConnectApp:SqlServerDeployToElasticPoolName": {
            "Type": "String",
            "Reference": "SqlServerDeployToElasticPoolName",
            "Description": "Override to pass DeployToElasticPoolName value to XConnectApp config."
        }
    },
    "Variables": {
        "Sql.Database.ProcessingPools.Password": "[if(variable('Sql.Database.ProcessingPools.Password.Test'),variable('Sql.Database.ProcessingPools.Password.Generate'),parameter('DatabaseProcessingPoolsPassword'))]",
        "Sql.Database.ProcessingPools.Password.Test": "[equal(parameter('DatabaseProcessingPoolsPassword'),'SIF-Default')]",
        "Sql.Database.ProcessingPools.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.ProcessingPools.Password": "[variable('Sql.Database.ProcessingPools.Password')]",
        "SitecoreApp:Sql.Database.ProcessingPools.Password": "[variable('Sql.Database.ProcessingPools.Password')]",

        "Sql.Database.Collection.Password": "[if(variable('Sql.Database.Collection.Password.Test'),variable('Sql.Database.Collection.Password.Generate'),parameter('DatabaseCollectionPassword'))]",
        "Sql.Database.Collection.Password.Test": "[equal(parameter('DatabaseCollectionPassword'),'SIF-Default')]",
        "Sql.Database.Collection.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.Collection.Password": "[variable('Sql.Database.Collection.Password')]",

        "Sql.Database.ReferenceData.Password": "[if(variable('Sql.Database.ReferenceData.Password.Test'),variable('Sql.Database.ReferenceData.Password.Generate'),parameter('DatabaseReferenceDataPassword'))]",
        "Sql.Database.ReferenceData.Password.Test": "[equal(parameter('DatabaseReferenceDataPassword'),'SIF-Default')]",
        "Sql.Database.ReferenceData.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.ReferenceData.Password": "[variable('Sql.Database.ReferenceData.Password')]",
        "SitecoreApp:Sql.Database.ReferenceData.Password": "[variable('Sql.Database.ReferenceData.Password')]",

        "Sql.Database.MarketingAutomation.Password": "[if(variable('Sql.Database.MarketingAutomation.Password.Test'),variable('Sql.Database.MarketingAutomation.Password.Generate'),parameter('DatabaseMarketingAutomationPassword'))]",
        "Sql.Database.MarketingAutomation.Password.Test": "[equal(parameter('DatabaseMarketingAutomationPassword'),'SIF-Default')]",
        "Sql.Database.MarketingAutomation.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.MarketingAutomation.Password": "[variable('Sql.Database.MarketingAutomation.Password')]",
        "SitecoreApp:Sql.Database.MarketingAutomation.Password": "[variable('Sql.Database.MarketingAutomation.Password')]",

        "Sql.Database.Messaging.Password": "[if(variable('Sql.Database.Messaging.Password.Test'),variable('Sql.Database.Messaging.Password.Generate'),parameter('DatabaseMessagingPassword'))]",
        "Sql.Database.Messaging.Password.Test": "[equal(parameter('DatabaseMessagingPassword'),'SIF-Default')]",
        "Sql.Database.Messaging.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.Messaging.Password": "[variable('Sql.Database.Messaging.Password')]",
        "SitecoreApp:Sql.Database.Messaging.Password": "[variable('Sql.Database.Messaging.Password')]",

        "Sql.Database.ProcessingEngine.Password": "[if(variable('Sql.Database.ProcessingEngine.Password.Test'),variable('Sql.Database.ProcessingEngine.Password.Generate'),parameter('DatabaseProcessingEnginePassword'))]",
        "Sql.Database.ProcessingEngine.Password.Test": "[equal(parameter('DatabaseProcessingEnginePassword'),'SIF-Default')]",
        "Sql.Database.ProcessingEngine.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.ProcessingEngine.Password": "[variable('Sql.Database.ProcessingEngine.Password')]",

        "Sql.Database.Reporting.Password": "[if(variable('Sql.Database.Reporting.Password.Test'),variable('Sql.Database.Reporting.Password.Generate'),parameter('DatabaseReportingPassword'))]",
        "Sql.Database.Reporting.Password.Test": "[equal(parameter('DatabaseReportingPassword'),'SIF-Default')]",
        "Sql.Database.Reporting.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnectApp:Sql.Database.Reporting.Password": "[variable('Sql.Database.Reporting.Password')]",
        "SitecoreApp:Sql.Database.Reporting.Password": "[variable('Sql.Database.Reporting.Password')]",

        "Sql.Database.Core.Password": "[if(variable('Sql.Database.Core.Password.Test'),variable('Sql.Database.Core.Password.Generate'),parameter('DatabaseCorePassword'))]",
        "Sql.Database.Core.Password.Test": "[equal(parameter('DatabaseCorePassword'),'SIF-Default')]",
        "Sql.Database.Core.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.Core.Password": "[variable('Sql.Database.Core.Password')]",

        "Sql.Database.Security.Password": "[if(variable('Sql.Database.Security.Password.Test'),variable('Sql.Database.Security.Password.Generate'),parameter('DatabaseSecurityPassword'))]",
        "Sql.Database.Security.Password.Test": "[equal(parameter('DatabaseSecurityPassword'),'SIF-Default')]",
        "Sql.Database.Security.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.Security.Password": "[variable('Sql.Database.Security.Password')]",
        "IdentityServerApp:Sql.Database.Security.Password": "[variable('Sql.Database.Security.Password')]",

        "Sql.Database.Master.Password": "[if(variable('Sql.Database.Master.Password.Test'),variable('Sql.Database.Master.Password.Generate'),parameter('DatabaseMasterPassword'))]",
        "Sql.Database.Master.Password.Test": "[equal(parameter('DatabaseMasterPassword'),'SIF-Default')]",
        "Sql.Database.Master.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.Master.Password": "[variable('Sql.Database.Master.Password')]",

        "Sql.Database.Web.Password": "[if(variable('Sql.Database.Web.Password.Test'),variable('Sql.Database.Web.Password.Generate'),parameter('DatabaseWebPassword'))]",
        "Sql.Database.Web.Password.Test": "[equal(parameter('DatabaseWebPassword'),'SIF-Default')]",
        "Sql.Database.Web.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.Web.Password": "[variable('Sql.Database.Web.Password')]",

        "Sql.Database.ProcessingTasks.Password": "[if(variable('Sql.Database.ProcessingTasks.Password.Test'),variable('Sql.Database.ProcessingTasks.Password.Generate'),parameter('DatabaseProcessingTasksPassword'))]",
        "Sql.Database.ProcessingTasks.Password.Test": "[equal(parameter('DatabaseProcessingTasksPassword'),'SIF-Default')]",
        "Sql.Database.ProcessingTasks.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.ProcessingTasks.Password": "[variable('Sql.Database.ProcessingTasks.Password')]",

        "Sql.Database.Forms.Password": "[if(variable('Sql.Database.Forms.Password.Test'),variable('Sql.Database.Forms.Password.Generate'),parameter('DatabaseFormsPassword'))]",
        "Sql.Database.Forms.Password.Test": "[equal(parameter('DatabaseFormsPassword'),'SIF-Default')]",
        "Sql.Database.Forms.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.Forms.Password": "[variable('Sql.Database.Forms.Password')]",

        "Sql.Database.EXMMaster.Password": "[if(variable('Sql.Database.EXMMaster.Password.Test'),variable('Sql.Database.EXMMaster.Password.Generate'),parameter('DatabaseExmMasterPassword'))]",
        "Sql.Database.EXMMaster.Password.Test": "[equal(parameter('DatabaseExmMasterPassword'),'SIF-Default')]",
        "Sql.Database.EXMMaster.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "SitecoreApp:Sql.Database.EXMMaster.Password": "[variable('Sql.Database.EXMMaster.Password')]",

        "IdentityServer.Client.Secret": "[if(variable('IdentityServer.Client.Secret.Test'),variable('IdentityServer.Client.Secret.Generate'),parameter('IdentityServerClientSecret'))]",
        "IdentityServer.Client.Secret.Test": "[equal(parameter('IdentityServerClientSecret'),'SIF-Default')]",
        "IdentityServer.Client.Secret.Generate": "[randomstring(Length:100,DisAllowSpecial:True)]",

        "IdentityServerApp:IdentityServer.Client.Secret": "[variable('IdentityServer.Client.Secret')]",
        "SitecoreApp:IdentityServer.Client.Secret": "[variable('IdentityServer.Client.Secret')]"
    },
    "Includes": {
        "IdentityServerCertificate": {
            "Source": ".\\..\\Certificates\\createcert.json"
        },
        "IdentityServerApp": {
            "Source": ".\\identityServer.json"
        },
        "XConnectCertificate": {
            "Source": ".\\..\\Certificates\\createcert.json"
        },
        "XConnectSolr": {
            "Source": ".\\xconnect-solr.json"
        },
        "XConnectApp": {
            "Source": ".\\xconnect-xp0.json"
        },

        "SitecoreSolr": {
            "Source": ".\\Sitecore-solr.json"
        },
        "SitecoreApp": {
            "Source": ".\\Sitecore-XP0.json"
        }
    },
    "Register": {
        "Tasks": {
            "SetVariable": "Set-Variable"
        }
    },
    "Tasks": {
        "GeneratePasswords": {
            "Description": "Generates all shared passwords and secrets.",
            "Type": "SetVariable",
            "Params": {
                "Name": "XP0Passwords",
                "Scope": "Global",
                "Value": [
                    {
                        "DatabaseProcessingPoolsPassword": "[variable('Sql.Database.ProcessingPools.Password')]"
                    },
                    {
                        "DatabaseCollectionPassword": "[variable('Sql.Database.Collection.Password')]"
                    },
                    {
                        "DatabaseReferenceDataPassword": "[variable('Sql.Database.ReferenceData.Password')]"
                    },
                    {
                        "DatabaseMarketingAutomationPassword": "[variable('Sql.Database.MarketingAutomation.Password')]"
                    },
                    {
                        "DatabaseMessagingPassword": "[variable('Sql.Database.Messaging.Password')]"
                    },
                    {
                        "DatabaseProcessingEnginePassword": "[variable('Sql.Database.ProcessingEngine.Password')]"
                    },
                    {
                        "DatabaseReportingPassword": "[variable('Sql.Database.Reporting.Password')]"
                    },
                    {
                        "DatabaseCorePassword": "[variable('Sql.Database.Core.Password')]"
                    },
                    {
                        "DatabaseSecurityPassword": "[variable('Sql.Database.Security.Password')]"
                    },
                    {
                        "DatabaseMasterPassword": "[variable('Sql.Database.Master.Password')]"
                    },
                    {
                        "DatabaseWebPassword": "[variable('Sql.Database.Web.Password')]"
                    },
                    {
                        "DatabaseProcessingTasksPassword": "[variable('Sql.Database.ProcessingTasks.Password')]"
                    },
                    {
                        "DatabaseFormsPassword": "[variable('Sql.Database.Forms.Password')]"
                    },
                    {
                        "DatabaseExmMasterPassword": "[variable('Sql.Database.EXMMaster.Password')]"
                    },
                    {
                        "IdentityServerClientSecret": "[variable('IdentityServer.Client.Secret')]"
                    }
                ]
            },
            "Skip": "[parameter('Update')]"
        }
    }
}
