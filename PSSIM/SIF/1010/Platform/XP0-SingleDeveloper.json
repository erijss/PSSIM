{
    "Parameters": {
        "XConnect_CertificateName": {
            "Type": "String",
            "Description": "The name of the certificate to be created for the xconnect server.",
            "DefaultValue": ""
        },
        "IdentityServer_CertificateName": {
            "Type": "String",
            "Description": "The name of the certificate to be created for the identity server.",
            "DefaultValue": ""
        },
        "IdentityServer_AppName": {
            "Type": "String",
            "Description": "The name of the identity server to be created.",
            "DefaultValue": "sitecore.auth"
        },
        "Apps_LicenseFile": {
            "Type": "String",
            "Description": "The path to the Sitecore license file.",
            "DefaultValue": ".\\License.xml"
        },
        "Apps_Prefix": {
            "Type": "String",
            "DefaultValue": "SC910",
            "Description": "The prefix for uniquely identifying instances."
        },
        "Sitecore_AdminPassword": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "The admin password for the Sitecore instance."
        },
        "Apps_RootFolder": {
            "Type": "String",
            "Description": "Root folder to install the site to. If left on the default [systemdrive]:\\inetpub\\wwwroot will be used.",
            "DefaultValue": ""
        },
        "SqlServer_AdminUser": {
            "Type": "string",
            "DefaultValue": "sa",
            "Description": "The Sql admin user account to use when installing databases."
        },
        "SqlServer_AdminPassword": {
            "Type": "string",
            "DefaultValue": "12345",
            "Description": "The Sql admin password to use when installing databases."
        },
        "SqlServer_Instance": {
            "Type": "String",
            "DefaultValue": "Localhost",
            "Description": "The Sql Server where databases will be installed."
        },
        "Database_Collection_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql admin password to use when installing databases."
        },
        "Database_ProcessingPools_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Pools connection string in Sitecore."
        },
        "Database_ReferenceData_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Reference Data connection string in Sitecore."
        },
        "Database_MarketingAutomation_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Marketing Automation connection string in Sitecore."
        },
        "Database_Messaging_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Messaging connection string in Sitecore."
        },
        "Database_ProcessingEngine_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Engine Tasks and Storage database connection strings in Sitecore."
        },
        "Database_Reporting_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Reporting connection string in Sitecore."
        },
        "Database_Core_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Core connection string in Sitecore."
        },
        "Database_Security_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Security connection string in Sitecore."
        },
        "Database_Master_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Master connection string in Sitecore."
        },
        "Database_Web_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Web connection string in Sitecore."
        },
        "Database_ProcessingTasks_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Processing Tasks connection string in Sitecore."
        },
        "Database_Forms_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the Experience Forms connection string in Sitecore."
        },
        "Database_ExmMaster_Password": {
            "Type": "string",
            "DefaultValue": "SIF-Default",
            "Description": "The Sql password for the EXM Master connection string in Sitecore."
        },
        "Solr_Url": {
            "Type": "String",
            "DefaultValue": "https://localhost:8983/solr",
            "Description": "The Solr instance to use."
        },
        "Solr_Folder": {
            "Type": "String",
            "DefaultValue": "C:\\solr-8.4.0",
            "Description": "The file path to the Solr instance."
        },
        "Solr_Service": {
            "Type": "String",
            "DefaultValue": "Solr-8.4.0",
            "Description": "The name of the Solr service."
        },
        "XConnect_Package": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the XConnect package to deploy."
        },
        "XConnect_AppName": {
            "Type": "String",
            "DefaultValue": "XConnect",
            "Description": "The name of the XConnect site."
        },
        "Sitecore_AppName": {
            "Type": "String",
            "DefaultValue": "Sitecore",
            "Description": "The name of the Sitecore site."
        },
        "IdentityServer_PasswordRecoveryUrl": {
            "Type": "string",
            "Description": "Password recovery Url (Host name of CM instance).",
            "DefaultValue": "http:\\"
        },
        "Sitecore_Package": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the Sitecore package to deploy."
        },
        "IdentityServer_Package": {
            "Type": "String",
            "DefaultValue": "",
            "Description": "The path to the Identity Server package to deploy."
        },
        "XConnectCollection_Endpoint": {
            "Type": "string",
            "DefaultValue": "https://XConnect",
            "Description": "The url for the XConnect Collection Service."
        },
        "IdentityServer_ClientsConfiguration": {
            "Type": "string",
            "DefaultValue": "",
            "Description": "Sitecore IdentityServer clients configuration"
        },
        "IdentityServer_AllowedCorsOrigins": {
            "Type": "string",
            "Description": "Pipe-separated list of instances (URIs) that are allowed to login via Sitecore Identity.",
            "DefaultValue": ""
        },
        "Sitecore_IdentityAuthority": {
            "Type": "string",
            "DefaultValue": "https://SitecoreIdentityServerHost",
            "Description": "IdentityServer provider URI."
        },
        "IdentityServer_ClientSecret": {
            "Type": "string",
            "Description": "Client secret of PasswordClient section. It's a random string between 1 and 100 symbols long.",
            "DefaultValue": "SIF-Default"
        },
        "Packages_TempLocation": {
            "Type": "String",
            "Description": "Alternative location to save WDP packages. If left on the default $Env:Temp will be used.",
            "DefaultValue": ""
        },
        "Packages_DownloadLocations": {
            "Type": "String",
            "Description": "File with URI and SHA256 hashes of dynamically downloadable WDPs.",
            "DefaultValue": ".\\downloads.json"
        },
        "XConnect_App:Package": {
            "Type": "String",
            "Reference": "XConnect_Package",
            "Description": "Override to pass XConnectPackage value to XConnect_App config."
        },
        "Sitecore_App:Package": {
            "Type": "String",
            "Reference": "Sitecore_Package",
            "Description": "Override to pass SitecorePackage value to Sitecore_App config."
        },
        "IdentityServer_App:Package": {
            "Type": "String",
            "Reference": "IdentityServer_Package",
            "Description": "Override to pass IdentityServerPackage value to IdentityServer config."
        },
        "XConnect_App:Sitename": {
            "Type": "String",
            "Reference": "XConnect_AppName",
            "Description": "Override to pass XConnectSiteName value to XConnect_App config."
        },
        "Sitecore_App:Sitename": {
            "Type": "String",
            "Reference": "Sitecore_AppName",
            "Description": "Override to pass SitecoreSiteName value to Sitecore_App config."
        },
        "IdentityServer_App:SiteRoot": {
            "Type": "String",
            "Reference": "Apps_RootFolder",
            "Description": "Override to pass SiteRoot value to IdentityServer config."
        },
        "XConnect_App:SiteRoot": {
            "Type": "String",
            "Reference": "Apps_RootFolder",
            "Description": "Override to pass SiteRoot value to XConnect_App config."
        },
        "Sitecore_App:SiteRoot": {
            "Type": "String",
            "Reference": "Apps_RootFolder",
            "Description": "Override to pass SiteRoot value to Sitecore_App config."
        },
        "IdentityServer_App:identityserver_PasswordRecoveryUrl": {
            "Type": "String",
            "Reference": "IdentityServer_PasswordRecoveryUrl",
            "Description": "Override to pass PasswordRecoveryUrl value to IdentityServer config."
        },
        "Sitecore_App:sitecore_IdentityAuthority": {
            "Type": "String",
            "Reference": "Sitecore_IdentityAuthority",
            "Description": "Override to pass SitecoreIdentityAuthority value to Sitecore_App config."
        },
        "Sitecore_App:endpoint_XConnectCollection_Url": {
            "Type": "String",
            "Reference": "XConnectCollection_Endpoint",
            "Description": "Override to pass XConnectCollectionService value to Sitecore_App config."
        },
        "IdentityServer_App:ClientsConfiguration": {
            "Type": "String",
            "Reference": "IdentityServer_ClientsConfiguration",
            "Description": "Override to pass ClientsConfiguration value to IdentityServer config."
        },
        "XConnect_App:SqlServer": {
            "Type": "String",
            "Reference": "SqlServer_Instance",
            "Description": "Override to pass SqlServer value to XConnect_App config."
        },
        "Sitecore_App:SqlServer": {
            "Type": "String",
            "Reference": "SqlServer_Instance",
            "Description": "Override to pass SqlServer value to Sitecore_App config."
        },
        "IdentityServer_App:SqlServer": {
            "Type": "String",
            "Reference": "SqlServer_Instance",
            "Description": "Override to pass SqlServer value to IdentityServer config."
        },
        "XConnect_Solr:solr_Url": {
            "Type": "String",
            "Reference": "Solr_Url",
            "Description": "Override to pass SolrURL value to XConnect_Solr config."
        },
        "XConnect_App:solr_Url": {
            "Type": "String",
            "Reference": "Solr_Url",
            "Description": "Override to pass SolrURL value to XConnect_App config."
        },
        "Sitecore_Solr:solr_Url": {
            "Type": "String",
            "Reference": "Solr_Url",
            "Description": "Override to pass SolrURL value to Sitecore_Solr config."
        },
        "Sitecore_App:solr_Url": {
            "Type": "String",
            "Reference": "Solr_Url",
            "Description": "Override to pass SolrURL value to Sitecore_App config."
        },
        "XConnect_Solr:solr_Path": {
            "Type": "String",
            "Reference": "Solr_Folder",
            "Description": "Override to pass SolrRoot value to XConnect_Solr config."
        },
        "Sitecore_Solr:solr_Path": {
            "Type": "String",
            "Reference": "Solr_Folder",
            "Description": "Override to pass SolrRoot value to Sitecore_Solr config."
        },
        "XConnect_Solrendpoint_Solr_Url": {
            "Type": "String",
            "Reference": "Solr_Service",
            "Description": "Override to pass SolrService value to XConnect_Solr config."
        },
        "Sitecore_Solrendpoint_Solr_Url": {
            "Type": "String",
            "Reference": "Solr_Service",
            "Description": "Override to pass SolrService value to Sitecore_Solr config."
        },
        "XConnect_Solr:SolrCorePrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to XConnect_Solr config."
        },
        "XConnect_App:SqlDbPrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to XConnect_App config."
        },
        "XConnect_App:SolrCorePrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to XConnect_App config."
        },
        "Sitecore_Solr:SolrCorePrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to Sitecore_Solr config."
        },
        "Sitecore_App:SqlDbPrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to Sitecore_App config."
        },
        "IdentityServer_App:SqlDbPrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to IdentityServer config."
        },
        "Sitecore_App:SolrCorePrefix": {
            "Type": "String",
            "Reference": "Apps_Prefix",
            "Description": "Override to pass Prefix value to Sitecore_App config."
        },
        "XConnect_Certificate:certificate_Name": {
            "Type": "String",
            "Reference": "XConnect_CertificateName",
            "Description": "Override to pass XConnectCertificateName value to XConnect_Certificate config."
        },
        "IdentityServer_Certificate:certificate_Name": {
            "Type": "String",
            "Reference": "IdentityServer_CertificateName",
            "Description": "Override to pass IdentityServer_CertificateName value to IdentityServer_Certificate config."
        },
        "IdentityServer_App:SiteName": {
            "Type": "String",
            "Reference": "IdentityServer_AppName",
            "Description": "Override to pass IdentityServer_AppName value to IdentityServer config."
        },
        "IdentityServer_App:SitecoreIdentityCert": {
            "Type": "String",
            "Reference": "IdentityServer_CertificateName",
            "Description": "Override to pass IdentityServer_CertificateName value to IdentityServer config."
        },
        "XConnect_App:app_Certificate": {
            "Type": "String",
            "Reference": "XConnect_CertificateName",
            "Description": "Override to pass CertificateName value to XConnect_App config."
        },
        "Sitecore_App:xconnect_Certificate": {
            "Type": "String",
            "Reference": "XConnect_CertificateName",
            "Description": "Override to pass CertificateName value to Sitecore_App config."
        },
        "XConnect_App:app_License": {
            "Type": "String",
            "Reference": "Apps_LicenseFile",
            "Description": "Override to pass LicenseFile value to XConnect_App config."
        },
        "Sitecore_App:app_License": {
            "Type": "String",
            "Reference": "Apps_LicenseFile",
            "Description": "Override to pass LicenseFile value to Sitecore_App config."
        },
        "IdentityServer_App:app_License": {
            "Type": "String",
            "Reference": "Apps_LicenseFile",
            "Description": "Override to pass LicenseFile value to IdentityServer config."
        },
        "XConnect_App:sqlserver_AdminUser": {
            "Type": "String",
            "Reference": "SqlServer_AdminUser",
            "Description": "Override to pass SqlServer_AdminUser value to XConnect_App config."
        },
        "Sitecore_App:sqlserver_AdminUser": {
            "Type": "String",
            "Reference": "SqlServer_AdminUser",
            "Description": "Override to pass SqlServer_AdminUser value to Sitecore_App config."
        },
        "XConnect_App:sqlserver_AdminPassword": {
            "Type": "String",
            "Reference": "SqlServer_AdminPassword",
            "Description": "Override to pass SqlServer_AdminPassword value to XConnect_App config."
        },
        "Sitecore_App:sqlserver_AdminPassword": {
            "Type": "String",
            "Reference": "SqlServer_AdminPassword",
            "Description": "Override to pass SqlServer_AdminPassword value to Sitecore_App config."
        },
        "IdentityServer_App:identityserver_AllowedCorsOrigins": {
            "Type": "String",
            "Reference": "IdentityServer_AllowedCorsOrigins",
            "Description": "Override to pass AllowedCorsOrigins value to IdentityServer config."
        },
        "Sitecore_App:sitecore_AdminPassword": {
            "Type": "String",
            "Reference": "Sitecore_AdminPassword",
            "Description": "Override to pass SitecoreAdminPassword value to SitecoreXPO config."
        },
        "IdentityServer_App:PackagesTempLocation": {
            "Type": "String",
            "Reference": "Packages_TempLocation",
            "Description": "Override to pass PackagesTempLocation value to IdentityServer config."
        },
        "Sitecore_App:PackagesTempLocation": {
            "Type": "String",
            "Reference": "Packages_TempLocation",
            "Description": "Override to pass PackagesTempLocation name value to Sitecore_App config."
        },
        "XConnect_App:PackagesTempLocation": {
            "Type": "String",
            "Reference": "Packages_TempLocation",
            "Description": "Override to pass PackagesTempLocation name value to XConnect_App config."
        },
        "IdentityServer_App:DownloadLocations": {
            "Type": "String",
            "Reference": "Packages_DownloadLocations",
            "Description": "Override to pass DownloadLocations value to IdentityServer config."
        },
        "Sitecore_App:DownloadLocations": {
            "Type": "String",
            "Reference": "Packages_DownloadLocations",
            "Description": "Override to pass DownloadLocations name value to Sitecore_App config."
        },
        "XConnect_App:DownloadLocations": {
            "Type": "String",
            "Reference": "Packages_DownloadLocations",
            "Description": "Override to pass DownloadLocations name value to XConnect_App config."
        }
    },
    "Variables": {
        "Sql.Database.ProcessingPools.Password": "[if(variable('Sql.Database.ProcessingPools.Password.Test'),variable('Sql.Database.ProcessingPools.Password.Generate'),parameter('Database_ProcessingPools_Password'))]",
        "Sql.Database.ProcessingPools.Password.Test": "[equal(parameter('Database_ProcessingPools_Password'),'SIF-Default')]",
        "Sql.Database.ProcessingPools.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.ProcessingPools.Password": "[variable('Sql.Database.ProcessingPools.Password')]",
        "Sitecore_App:Sql.Database.ProcessingPools.Password": "[variable('Sql.Database.ProcessingPools.Password')]",

        "Sql.Database.Collection.Password": "[if(variable('Sql.Database.Collection.Password.Test'),variable('Sql.Database.Collection.Password.Generate'),parameter('Database_Collection_Password'))]",
        "Sql.Database.Collection.Password.Test": "[equal(parameter('Database_Collection_Password'),'SIF-Default')]",
        "Sql.Database.Collection.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.Collection.Password": "[variable('Sql.Database.Collection.Password')]",

        "Sql.Database.ReferenceData.Password": "[if(variable('Sql.Database.ReferenceData.Password.Test'),variable('Sql.Database.ReferenceData.Password.Generate'),parameter('Database_ReferenceData_Password'))]",
        "Sql.Database.ReferenceData.Password.Test": "[equal(parameter('Database_ReferenceData_Password'),'SIF-Default')]",
        "Sql.Database.ReferenceData.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.ReferenceData.Password": "[variable('Sql.Database.ReferenceData.Password')]",
        "Sitecore_App:Sql.Database.ReferenceData.Password": "[variable('Sql.Database.ReferenceData.Password')]",

        "Sql.Database.MarketingAutomation.Password": "[if(variable('Sql.Database.MarketingAutomation.Password.Test'),variable('Sql.Database.MarketingAutomation.Password.Generate'),parameter('Database_MarketingAutomation_Password'))]",
        "Sql.Database.MarketingAutomation.Password.Test": "[equal(parameter('Database_MarketingAutomation_Password'),'SIF-Default')]",
        "Sql.Database.MarketingAutomation.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.MarketingAutomation.Password": "[variable('Sql.Database.MarketingAutomation.Password')]",
        "Sitecore_App:Sql.Database.MarketingAutomation.Password": "[variable('Sql.Database.MarketingAutomation.Password')]",

        "Sql.Database.Messaging.Password": "[if(variable('Sql.Database.Messaging.Password.Test'),variable('Sql.Database.Messaging.Password.Generate'),parameter('Database_Messaging_Password'))]",
        "Sql.Database.Messaging.Password.Test": "[equal(parameter('Database_Messaging_Password'),'SIF-Default')]",
        "Sql.Database.Messaging.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.Messaging.Password": "[variable('Sql.Database.Messaging.Password')]",
        "Sitecore_App:Sql.Database.Messaging.Password": "[variable('Sql.Database.Messaging.Password')]",

        "Sql.Database.ProcessingEngine.Password": "[if(variable('Sql.Database.ProcessingEngine.Password.Test'),variable('Sql.Database.ProcessingEngine.Password.Generate'),parameter('Database_ProcessingEngine_Password'))]",
        "Sql.Database.ProcessingEngine.Password.Test": "[equal(parameter('Database_ProcessingEngine_Password'),'SIF-Default')]",
        "Sql.Database.ProcessingEngine.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.ProcessingEngine.Password": "[variable('Sql.Database.ProcessingEngine.Password')]",

        "Sql.Database.Reporting.Password": "[if(variable('Sql.Database.Reporting.Password.Test'),variable('Sql.Database.Reporting.Password.Generate'),parameter('Database_Reporting_Password'))]",
        "Sql.Database.Reporting.Password.Test": "[equal(parameter('Database_Reporting_Password'),'SIF-Default')]",
        "Sql.Database.Reporting.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "XConnect_App:Sql.Database.Reporting.Password": "[variable('Sql.Database.Reporting.Password')]",
        "Sitecore_App:Sql.Database.Reporting.Password": "[variable('Sql.Database.Reporting.Password')]",

        "Sql.Database.Core.Password": "[if(variable('Sql.Database.Core.Password.Test'),variable('Sql.Database.Core.Password.Generate'),parameter('Database_Core_Password'))]",
        "Sql.Database.Core.Password.Test": "[equal(parameter('Database_Core_Password'),'SIF-Default')]",
        "Sql.Database.Core.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.Core.Password": "[variable('Sql.Database.Core.Password')]",

        "Sql.Database.Security.Password": "[if(variable('Sql.Database.Security.Password.Test'),variable('Sql.Database.Security.Password.Generate'),parameter('Database_Security_Password'))]",
        "Sql.Database.Security.Password.Test": "[equal(parameter('Database_Security_Password'),'SIF-Default')]",
        "Sql.Database.Security.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.Security.Password": "[variable('Sql.Database.Security.Password')]",
        "IdentityServer_App:Sql.Database.Security.Password": "[variable('Sql.Database.Security.Password')]",

        "Sql.Database.Master.Password": "[if(variable('Sql.Database.Master.Password.Test'),variable('Sql.Database.Master.Password.Generate'),parameter('Database_Master_Password'))]",
        "Sql.Database.Master.Password.Test": "[equal(parameter('Database_Master_Password'),'SIF-Default')]",
        "Sql.Database.Master.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.Master.Password": "[variable('Sql.Database.Master.Password')]",

        "Sql.Database.Web.Password": "[if(variable('Sql.Database.Web.Password.Test'),variable('Sql.Database.Web.Password.Generate'),parameter('Database_Web_Password'))]",
        "Sql.Database.Web.Password.Test": "[equal(parameter('Database_Web_Password'),'SIF-Default')]",
        "Sql.Database.Web.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.Web.Password": "[variable('Sql.Database.Web.Password')]",

        "Sql.Database.ProcessingTasks.Password": "[if(variable('Sql.Database.ProcessingTasks.Password.Test'),variable('Sql.Database.ProcessingTasks.Password.Generate'),parameter('Database_ProcessingTasks_Password'))]",
        "Sql.Database.ProcessingTasks.Password.Test": "[equal(parameter('Database_ProcessingTasks_Password'),'SIF-Default')]",
        "Sql.Database.ProcessingTasks.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.ProcessingTasks.Password": "[variable('Sql.Database.ProcessingTasks.Password')]",

        "Sql.Database.Forms.Password": "[if(variable('Sql.Database.Forms.Password.Test'),variable('Sql.Database.Forms.Password.Generate'),parameter('Database_Forms_Password'))]",
        "Sql.Database.Forms.Password.Test": "[equal(parameter('Database_Forms_Password'),'SIF-Default')]",
        "Sql.Database.Forms.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.Forms.Password": "[variable('Sql.Database.Forms.Password')]",

        "Sql.Database.EXMMaster.Password": "[if(variable('Sql.Database.EXMMaster.Password.Test'),variable('Sql.Database.EXMMaster.Password.Generate'),parameter('Database_ExmMaster_Password'))]",
        "Sql.Database.EXMMaster.Password.Test": "[equal(parameter('Database_ExmMaster_Password'),'SIF-Default')]",
        "Sql.Database.EXMMaster.Password.Generate": "[randomstring(Length:20,DisAllowSpecial:True,EnforceComplexity:True)]",

        "Sitecore_App:Sql.Database.EXMMaster.Password": "[variable('Sql.Database.EXMMaster.Password')]",

        "IdentityServer.Client.Secret": "[if(variable('IdentityServer.Client.Secret.Test'),variable('IdentityServer.Client.Secret.Generate'),parameter('IdentityServer_ClientSecret'))]",
        "IdentityServer.Client.Secret.Test": "[equal(parameter('IdentityServer_ClientSecret'),'SIF-Default')]",
        "IdentityServer.Client.Secret.Generate": "[randomstring(Length:100,DisAllowSpecial:True)]",

        "IdentityServer_App:IdentityServer.Client.Secret": "[variable('IdentityServer.Client.Secret')]",
        "Sitecore_App:IdentityServer.Client.Secret": "[variable('IdentityServer.Client.Secret')]"
    },
    "Includes": {
        "IdentityServer_Certificate": {
            "Source": ".\\..\\Certificates\\createcert.json"
        },
        "IdentityServer_App": {
            "Source": ".\\identityServer.json"
        },
        "XConnect_Certificate": {
            "Source": ".\\..\\Certificates\\createcert.json"
        },
        "XConnect_Solr": {
            "Source": ".\\xconnect-solr.json"
        },
        "XConnect_App": {
            "Source": ".\\xconnect-xp0.json"
        },
        "Sitecore_Certificate": {
            "Source": ".\\..\\Certificates\\createcert.json"
        },
        "Sitecore_Solr": {
            "Source": ".\\Sitecore-solr.json"
        },
        "Sitecore_App": {
            "Source": ".\\Sitecore-XP0.json"
        }
    },
    "Register": {
        "Tasks": {
            "SetVariable": "Set-Variable"
        }
    },
    "Tasks": {
        "GeneratePasswords": {
            "Description": "Generates all shared passwords and secrets.",
            "Type": "SetVariable",
            "Params": {
                "Name": "XP0Passwords",
                "Scope": "Global",
                "Value": [
                    {
                        "Database_ProcessingPools_Password": "[variable('Sql.Database.ProcessingPools.Password')]"
                    },
                    {
                        "Database_Collection_Password": "[variable('Sql.Database.Collection.Password')]"
                    },
                    {
                        "Database_ReferenceData_Password": "[variable('Sql.Database.ReferenceData.Password')]"
                    },
                    {
                        "Database_MarketingAutomation_Password": "[variable('Sql.Database.MarketingAutomation.Password')]"
                    },
                    {
                        "Database_Messaging_Password": "[variable('Sql.Database.Messaging.Password')]"
                    },
                    {
                        "Database_ProcessingEngine_Password": "[variable('Sql.Database.ProcessingEngine.Password')]"
                    },
                    {
                        "Database_Reporting_Password": "[variable('Sql.Database.Reporting.Password')]"
                    },
                    {
                        "Database_Core_Password": "[variable('Sql.Database.Core.Password')]"
                    },
                    {
                        "Database_Security_Password": "[variable('Sql.Database.Security.Password')]"
                    },
                    {
                        "Database_Master_Password": "[variable('Sql.Database.Master.Password')]"
                    },
                    {
                        "Database_Web_Password": "[variable('Sql.Database.Web.Password')]"
                    },
                    {
                        "Database_ProcessingTasks_Password": "[variable('Sql.Database.ProcessingTasks.Password')]"
                    },
                    {
                        "Database_Forms_Password": "[variable('Sql.Database.Forms.Password')]"
                    },
                    {
                        "Database_ExmMaster_Password": "[variable('Sql.Database.EXMMaster.Password')]"
                    },
                    {
                        "IdentityServer_ClientSecret": "[variable('IdentityServer.Client.Secret')]"
                    }
                ]
            }
        }
    }
}
